<!DOCTYPE html>

<html lang="it" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>routes module &#8212; Documentazione prokect_work_mp 1.0 </title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=945aedf1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=45930005"></script>
    <link rel="index" title="Indice" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="server module" href="server.html" />
    <link rel="prev" title="db module" href="db.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-routes">
<span id="routes-module"></span><h1>routes module<a class="headerlink" href="#module-routes" title="Link to this heading">¶</a></h1>
<p>Provides common classes and functions most users will want access to.</p>
<dl class="py class">
<dt class="sig sig-object py" id="routes.Mapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routes.</span></span><span class="sig-name descname"><span class="pre">Mapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller_scan=&lt;function</span> <span class="pre">controller_scan&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_scan=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">register=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">explicit=True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Basi: <code class="xref py py-class docutils literal notranslate"><span class="pre">SubMapperParent</span></code></p>
</div></blockquote>
<p>Mapper handles URL generation and URL recognition in a web
application.</p>
<p>Mapper is built handling dictionary’s. It is assumed that the web
application will handle the dictionary returned by URL recognition
to dispatch appropriately.</p>
<p>URL generation is done by passing keyword parameters into the
generate function, a URL is then returned.</p>
<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.connect"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.connect" title="Link to this definition">¶</a></dt>
<dd><p>Create and connect a new Route to the Mapper.</p>
<p>Usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;:controller/:action/:id&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;date/:year/:month/:day&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s2">&quot;blog&quot;</span><span class="p">,</span>
          <span class="n">action</span><span class="o">=</span><span class="s2">&quot;view&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;archives/:page&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s2">&quot;blog&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;by_page&quot;</span><span class="p">,</span>
<span class="n">requirements</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;page&#39;</span><span class="p">:</span><span class="s1">&#39;\d{1,2}&#39;</span> <span class="p">})</span>
<span class="n">m</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;category_list&#39;</span><span class="p">,</span> <span class="s1">&#39;archives/category/:section&#39;</span><span class="p">,</span>
          <span class="n">controller</span><span class="o">=</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
          <span class="n">section</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;view&#39;</span><span class="p">,</span>
          <span class="n">section</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.create_regs">
<span class="sig-name descname"><span class="pre">create_regs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.create_regs"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.create_regs" title="Link to this definition">¶</a></dt>
<dd><p>Atomically creates regular expressions for all connected
routes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="routes.Mapper.environ">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">environ</span></span><a class="headerlink" href="#routes.Mapper.environ" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">routes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.extend"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.extend" title="Link to this definition">¶</a></dt>
<dd><p>Extends the mapper routes with a list of Route objects</p>
<p>If a path_prefix is provided, all the routes will have their
path prepended with the path_prefix.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">(</span><span class="n">controller_scan</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;splash&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="o">.</span><span class="n">matchlist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;home&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">routes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Route</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;/index.htm&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">action</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">routes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="o">.</span><span class="n">matchlist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">routes</span><span class="p">,</span> <span class="n">path_prefix</span><span class="o">=</span><span class="s1">&#39;/subapp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="o">.</span><span class="n">matchlist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="o">.</span><span class="n">matchlist</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">routepath</span> <span class="o">==</span> <span class="s1">&#39;/subapp/index.htm&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>This function does not merely extend the mapper with the
given list of routes, it actually creates new routes with
identical calling arguments.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.generate"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.generate" title="Link to this definition">¶</a></dt>
<dd><p>Generate a route from a set of keywords</p>
<p>Returns the url text, or None if no URL could be generated.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">controller</span><span class="o">=</span><span class="s1">&#39;content&#39;</span><span class="p">,</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;view&#39;</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.make_route">
<span class="sig-name descname"><span class="pre">make_route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.make_route"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.make_route" title="Link to this definition">¶</a></dt>
<dd><p>Make a new Route object</p>
<p>A subclass can override this method to use a custom Route class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.match"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.match" title="Link to this definition">¶</a></dt>
<dd><p>Match a URL against against one of the routes contained.</p>
<p>Will return None if no valid match is found.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resultdict</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;/joe/sixpack&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.redirect">
<span class="sig-name descname"><span class="pre">redirect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">match_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.redirect"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.redirect" title="Link to this definition">¶</a></dt>
<dd><p>Add a redirect route to the mapper</p>
<p>Redirect routes bypass the wrapped WSGI application and instead
result in a redirect being issued by the RoutesMiddleware. As
such, this method is only meaningful when using
RoutesMiddleware.</p>
<p>By default, a 302 Found status code is used, this can be
changed by providing a <code class="docutils literal notranslate"><span class="pre">_redirect_code</span></code> keyword argument
which will then be used instead. Note that the entire status
code string needs to be present.</p>
<p>When using keyword arguments, all arguments that apply to
matching will be used for the match, while generation specific
options will be used during generation. Thus all options
normally available to connected Routes may be used with
redirect routes as well.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">()</span>
<span class="nb">map</span><span class="o">.</span><span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/legacyapp/archives/{url:.*}&#39;</span><span class="p">,</span> <span class="s1">&#39;/archives/</span><span class="si">{url}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">map</span><span class="o">.</span><span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/home/index&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
             <span class="n">_redirect_code</span><span class="o">=</span><span class="s1">&#39;301 Moved Permanently&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.resource">
<span class="sig-name descname"><span class="pre">resource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">member_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.resource"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.resource" title="Link to this definition">¶</a></dt>
<dd><p>Generate routes for a controller resource</p>
<p>The member_name name should be the appropriate singular version
of the resource given your locale and used with members of the
collection. The collection_name name will be used to refer to
the resource collection methods and should be a plural version
of the member_name argument. By default, the member_name name
will also be assumed to map to a controller you create.</p>
<p>The concept of a web resource maps somewhat directly to “CRUD”
operations. The overlying things to keep in mind is that
mapping a resource is about handling creating, viewing, and
editing that resource.</p>
<p>All keyword arguments are optional.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">controller</span></code></dt><dd><p>If specified in the keyword args, the controller will be
the actual controller used, but the rest of the naming
conventions used for the route names and URL paths are
unchanged.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collection</span></code></dt><dd><p>Additional action mappings used to manipulate/view the
entire set of resources provided by the controller.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;messages&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;rss&#39;</span><span class="p">:</span><span class="s1">&#39;GET&#39;</span><span class="p">})</span>
<span class="c1"># GET /message/rss (maps to the rss action)</span>
<span class="c1"># also adds named route &quot;rss_message&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">member</span></code></dt><dd><p>Additional action mappings used to access an individual
“member” of this controllers resources.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;messages&#39;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mark&#39;</span><span class="p">:</span><span class="s1">&#39;POST&#39;</span><span class="p">})</span>
<span class="c1"># POST /message/1/mark (maps to the mark action)</span>
<span class="c1"># also adds named route &quot;mark_message&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">new</span></code></dt><dd><p>Action mappings that involve dealing with a new member in
the controller resources.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;messages&#39;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;preview&#39;</span><span class="p">:</span><span class="s1">&#39;POST&#39;</span><span class="p">})</span>
<span class="c1"># POST /message/new/preview (maps to the preview action)</span>
<span class="c1"># also adds a url named &quot;preview_new_message&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path_prefix</span></code></dt><dd><p>Prepends the URL path for the Route with the path_prefix
given. This is most useful for cases where you want to mix
resources or relations between resources.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name_prefix</span></code></dt><dd><p>Perpends the route names that are generated with the
name_prefix given. Combined with the path_prefix option,
it’s easy to generate route names and paths that represent
resources that are in relations.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;messages&#39;</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span>
    <span class="n">path_prefix</span><span class="o">=</span><span class="s1">&#39;/category/:category_id&#39;</span><span class="p">,</span>
    <span class="n">name_prefix</span><span class="o">=</span><span class="s2">&quot;category_&quot;</span><span class="p">)</span>
<span class="c1"># GET /category/7/message/1</span>
<span class="c1"># has named route &quot;category_message&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">requirements</span></code></p>
<blockquote>
<div><p>A dictionary that restricts the matching of a
variable. Can be used when matching variables with path_prefix.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;messages&#39;</span><span class="p">,</span>
     <span class="n">path_prefix</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{project_id}</span><span class="s1">/&#39;</span><span class="p">,</span>
     <span class="n">requirements</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="sa">R</span><span class="s2">&quot;\d+&quot;</span><span class="p">})</span>
<span class="c1"># POST /01234/message</span>
<span class="c1">#    success, project_id is set to &quot;01234&quot;</span>
<span class="c1"># POST /foo/message</span>
<span class="c1">#    404 not found, won&#39;t be matched by this route</span>
</pre></div>
</div>
</div></blockquote>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">parent_resource</span></code></dt><dd><p>A <code class="docutils literal notranslate"><span class="pre">dict</span></code> containing information about the parent
resource, for creating a nested resource. It should contain
the <code class="docutils literal notranslate"><span class="pre">member_name</span></code> and <code class="docutils literal notranslate"><span class="pre">collection_name</span></code> of the parent
resource. This <code class="docutils literal notranslate"><span class="pre">dict</span></code> will
be available via the associated <code class="docutils literal notranslate"><span class="pre">Route</span></code> object which can
be accessed during a request via
<code class="docutils literal notranslate"><span class="pre">request.environ['routes.route']</span></code></p>
<p>If <code class="docutils literal notranslate"><span class="pre">parent_resource</span></code> is supplied and <code class="docutils literal notranslate"><span class="pre">path_prefix</span></code>
isn’t, <code class="docutils literal notranslate"><span class="pre">path_prefix</span></code> will be generated from
<code class="docutils literal notranslate"><span class="pre">parent_resource</span></code> as
«&lt;parent collection name&gt;/:&lt;parent member name&gt;_id».</p>
<p>If <code class="docutils literal notranslate"><span class="pre">parent_resource</span></code> is supplied and <code class="docutils literal notranslate"><span class="pre">name_prefix</span></code>
isn’t, <code class="docutils literal notranslate"><span class="pre">name_prefix</span></code> will be generated from
<code class="docutils literal notranslate"><span class="pre">parent_resource</span></code> as  «&lt;parent member name&gt;_».</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">routes.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">url_for</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;locations&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">parent_resource</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">member_name</span><span class="o">=</span><span class="s1">&#39;region&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">collection_name</span><span class="o">=</span><span class="s1">&#39;regions&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># path_prefix is &quot;regions/:region_id&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># name prefix is &quot;region_&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;region_locations&#39;</span><span class="p">,</span> <span class="n">region_id</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="go">&#39;/regions/13/locations&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;region_new_location&#39;</span><span class="p">,</span> <span class="n">region_id</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="go">&#39;/regions/13/locations/new&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;region_location&#39;</span><span class="p">,</span> <span class="n">region_id</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="go">&#39;/regions/13/locations/60&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;region_edit_location&#39;</span><span class="p">,</span> <span class="n">region_id</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="go">&#39;/regions/13/locations/60/edit&#39;</span>
</pre></div>
</div>
<p>Overriding generated <code class="docutils literal notranslate"><span class="pre">path_prefix</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;locations&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">parent_resource</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">member_name</span><span class="o">=</span><span class="s1">&#39;region&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">collection_name</span><span class="o">=</span><span class="s1">&#39;regions&#39;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">path_prefix</span><span class="o">=</span><span class="s1">&#39;areas/:area_id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># name prefix is &quot;region_&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;region_locations&#39;</span><span class="p">,</span> <span class="n">area_id</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
<span class="go">&#39;/areas/51/locations&#39;</span>
</pre></div>
</div>
<p>Overriding generated <code class="docutils literal notranslate"><span class="pre">name_prefix</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Mapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;locations&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">parent_resource</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">member_name</span><span class="o">=</span><span class="s1">&#39;region&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">collection_name</span><span class="o">=</span><span class="s1">&#39;regions&#39;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">name_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># path_prefix is &quot;regions/:region_id&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;locations&#39;</span><span class="p">,</span> <span class="n">region_id</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
<span class="go">&#39;/regions/51/locations&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="routes.Mapper.routematch">
<span class="sig-name descname"><span class="pre">routematch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/mapper.html#Mapper.routematch"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.Mapper.routematch" title="Link to this definition">¶</a></dt>
<dd><p>Match a URL against against one of the routes contained.</p>
<p>Will return None if no valid match is found, otherwise a
result dict and a route object is returned.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resultdict</span><span class="p">,</span> <span class="n">route_obj</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;/joe/sixpack&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="routes.URLGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routes.</span></span><span class="sig-name descname"><span class="pre">URLGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/util.html#URLGenerator"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.URLGenerator" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Basi: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</div></blockquote>
<p>The URL Generator generates URL’s</p>
<p>It is automatically instantiated by the RoutesMiddleware and put
into the <code class="docutils literal notranslate"><span class="pre">wsgiorg.routing_args</span></code> tuple accessible as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">environ</span><span class="p">[</span><span class="s1">&#39;wsgiorg.routing_args&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Or via the <code class="docutils literal notranslate"><span class="pre">routes.url</span></code> key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">environ</span><span class="p">[</span><span class="s1">&#39;routes.url&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The url object may be instantiated outside of a web context for use
in testing, however sub_domain support and fully qualified URL’s
cannot be generated without supplying a dict that must contain the
key <code class="docutils literal notranslate"><span class="pre">HTTP_HOST</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="routes.URLGenerator.current">
<span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/util.html#URLGenerator.current"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.URLGenerator.current" title="Link to this definition">¶</a></dt>
<dd><p>Generate a route that includes params used on the current
request</p>
<p>The arguments for this method are identical to <code class="docutils literal notranslate"><span class="pre">__call__</span></code>
except that arguments set to None will remove existing route
matches of the same name from the set of arguments used to
construct a URL.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routes.redirect_to">
<span class="sig-prename descclassname"><span class="pre">routes.</span></span><span class="sig-name descname"><span class="pre">redirect_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/util.html#redirect_to"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.redirect_to" title="Link to this definition">¶</a></dt>
<dd><p>Issues a redirect based on the arguments.</p>
<p>Redirect’s <em>should</em> occur as a «302 Moved» header, however the web
framework may utilize a different method.</p>
<p>All arguments are passed to url_for to retrieve the appropriate URL, then
the resulting URL it sent to the redirect function as the URL.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routes.request_config">
<span class="sig-prename descclassname"><span class="pre">routes.</span></span><span class="sig-name descname"><span class="pre">request_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes.html#request_config"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.request_config" title="Link to this definition">¶</a></dt>
<dd><p>Returns the Routes RequestConfig object.</p>
<p>To get the Routes RequestConfig:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">routes</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">request_config</span><span class="p">()</span>
</pre></div>
</div>
<p>The following attributes must be set on the config object every request:</p>
<dl>
<dt>mapper</dt><dd><p>mapper should be a Mapper instance thats ready for use</p>
</dd>
<dt>host</dt><dd><p>host is the hostname of the webapp</p>
</dd>
<dt>protocol</dt><dd><p>protocol is the protocol of the current request</p>
</dd>
<dt>mapper_dict</dt><dd><p>mapper_dict should be the dict returned by mapper.match()</p>
</dd>
<dt>redirect</dt><dd><p>redirect should be a function that issues a redirect,
and takes a url as the sole argument</p>
</dd>
<dt>prefix (optional)</dt><dd><p>Set if the application is moved under a URL prefix. Prefix
will be stripped before matching, and prepended on generation</p>
</dd>
<dt>environ (optional)</dt><dd><p>Set to the WSGI environ for automatic prefix support if the
webapp is underneath a “SCRIPT_NAME”</p>
<p>Setting the environ will use information in environ to try and
populate the host/protocol/mapper_dict options if you’ve already
set a mapper.</p>
</dd>
</dl>
<p><strong>Using your own requst local</strong></p>
<p>If you have your own request local object that you’d like to use instead
of the default thread local provided by Routes, you can configure Routes
to use it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">routes</span><span class="w"> </span><span class="kn">import</span> <span class="n">request_config</span><span class="p">()</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">request_config</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;using_request_local&#39;</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">request_local</span> <span class="o">=</span> <span class="n">YourLocalCallable</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">request_config</span><span class="p">()</span>
</pre></div>
</div>
<p>Once you have configured request_config, its advisable you retrieve it
again to get the object you wanted. The variable you assign to
request_local is assumed to be a callable that will get the local config
object you wish.</p>
<p>This example tests for the presence of the “using_request_local” attribute
which will be present if you haven’t assigned it yet. This way you can
avoid repeat assignments of the request specific callable.</p>
<p>Should you want the original object, perhaps to change the callable its
using or stop this behavior, call request_config(original=True).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routes.url_for">
<span class="sig-prename descclassname"><span class="pre">routes.</span></span><span class="sig-name descname"><span class="pre">url_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/routes/util.html#url_for"><span class="viewcode-link"><span class="pre">[sorgente]</span></span></a><a class="headerlink" href="#routes.url_for" title="Link to this definition">¶</a></dt>
<dd><p>Generates a URL</p>
<p>All keys given to url_for are sent to the Routes Mapper instance for
generation except for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">anchor</span>          <span class="n">specified</span> <span class="n">the</span> <span class="n">anchor</span> <span class="n">name</span> <span class="n">to</span> <span class="n">be</span> <span class="n">appened</span> <span class="n">to</span> <span class="n">the</span> <span class="n">path</span>
<span class="n">host</span>            <span class="n">overrides</span> <span class="n">the</span> <span class="n">default</span> <span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="n">host</span> <span class="k">if</span> <span class="n">provided</span>
<span class="n">protocol</span>        <span class="n">overrides</span> <span class="n">the</span> <span class="n">default</span> <span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="n">protocol</span> <span class="k">if</span> <span class="n">provided</span>
<span class="n">qualified</span>       <span class="n">creates</span> <span class="n">the</span> <span class="n">URL</span> <span class="k">with</span> <span class="n">the</span> <span class="n">host</span><span class="o">/</span><span class="n">port</span> <span class="n">information</span> <span class="k">as</span>
                <span class="n">needed</span>
</pre></div>
</div>
<p>The URL is generated based on the rest of the keys. When generating a new
URL, values will be used from the current request’s parameters (if
present). The following rules are used to determine when and how to keep
the current requests parameters:</p>
<ul class="simple">
<li><p>If the controller is present and begins with “/”, no defaults are used</p></li>
<li><p>If the controller is changed, action is set to “index” unless otherwise
specified</p></li>
</ul>
<p>For example, if the current request yielded a dict of
{“controller”: “blog”, “action”: “view”, “id”: 2}, with the standard
“:controller/:action/:id” route, you’d get the following results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>                    <span class="o">=&gt;</span>  <span class="s1">&#39;/blog/view/4&#39;</span><span class="p">,</span>
<span class="n">url_for</span><span class="p">(</span><span class="n">controller</span><span class="o">=</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>     <span class="o">=&gt;</span>  <span class="s1">&#39;/admin&#39;</span><span class="p">,</span>
<span class="n">url_for</span><span class="p">(</span><span class="n">controller</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>      <span class="o">=&gt;</span>  <span class="s1">&#39;/admin/view/2&#39;</span>
<span class="n">url_for</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">)</span>           <span class="o">=&gt;</span>  <span class="s1">&#39;/blog/edit/2&#39;</span><span class="p">,</span>
<span class="n">url_for</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="o">=&gt;</span>  <span class="s1">&#39;/blog/list&#39;</span>
</pre></div>
</div>
<p><strong>Static and Named Routes</strong></p>
<p>If there is a string present as the first argument, a lookup is done
against the named routes table to see if there’s any matching routes. The
keyword defaults used with static routes will be sent in as GET query
arg’s if a route matches.</p>
<p>If no route by that name is found, the string is assumed to be a raw URL.
Should the raw URL begin with <code class="docutils literal notranslate"><span class="pre">/</span></code> then appropriate SCRIPT_NAME data will
be added if present, otherwise the string will be used as the url with
keyword args becoming GET query args.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">prokect_work_mp</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Vai" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigazione</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="booking_routes.html">booking_routes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="db.html">db module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">routes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html">server module</a></li>
<li class="toctree-l2"><a class="reference internal" href="service_routes.html">service_routes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_routes.html">user_routes module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">server</a><ul>
      <li>Previous: <a href="db.html" title="capitolo precedente">db module</a></li>
      <li>Next: <a href="server.html" title="capitolo successivo">server module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, manfredi_piraino.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/routes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>